
___
# итоги работы

за время выполнения заданий удалось решить более половины из всех. все решения представлены в едином файле `260925_cxm-tests.gh`, расположенный в репозитории https://github.com/venb3rg/cxm-tests.git.
папка Plugins служит дополнением и содержит все использованные плагины к Grasshopper.

___
# пояснения

решения представляют собой кластеры, а также компоненты, созданные на базе ЯП Python. 
## define panel attributes

скрипт **Get Mesh Attributes** представляет собой компонент, реализованный на Python. следуя ТЗ, был создан класс GetMeshAttr; он является главным ядром скрипта. класс определяет несколько методов, среди которых:
- **get_mesh(self)** — возвращает полученную геометрию.
- **get_verts(self)** — возвращает все вершины (Vertices) изначального меша.
- **get_edges(self)** — возвращает все грани (Edges) изначального меша.
- **get_edges_len(self, meters = False)** — возвращает длины всех граней изначального меша. опционален вывод информации в метрах.
- **get_face_area(self, m2 = False)** — возвращает площади всех поверхностей (Faces) изначального меша. опционален вывод информации в квадратных метрах.

## define custom preview

группа компонентов определеяет видимость геометрии, полученной из вышеуказанного скрипта. используются нативные компоненты Grasshopper. 

## panel attributes to file

компонент **Write Panel Attributes** представляет собой кластеризованную группу нод. выполняет функцию выгрузки данных, полученных из **Get Panel Attributes**, в файл по указанному пути.
предлагается сценарий использования, при котором данные в соответсвующие входы поступают из соответствующих выходов компонента **Get Panel Attributes**. однако могут быть использованы любые элементы геометрии соответствующего типа, полученные любым способом, например набором нод, включающим в себя **Deconstruct Mesh**.

имеет несколько входов, среди которых:
- **mesh**  —  тип данных Mesh.
- **verts** —  тип данных Point.
- **edges** —  тип данных Line.
- **write** — тип данных Bool. используется для начала процесса записи файла.
- **edge_len** — тип данных Float.
- **path** — тип данных Str. используется для указания пути записи файла. по умолчанию `C:\temp\MeshAttr.txt`

а также один выход, сигнализирующий об успешном выполнении записи. пример сообщения, полученного посредством успешного выполнения операции записи:

`mesh attributes were written to file located at 'C:\temp\MeshAttr.txt'`


## panels inset

компонент **Panels Inset** представляет собой кластер компонентов Grasshopper. выполняет функцию создания внутренних панелей (Inset), получая на вход единичные  Mesh поверхности. 

помимо результирующей геометрии ввиде панелей (Panels) и обрамлений (Frames), предусмотрены *ограничения* для значений отступа. максимальное значение отступа определено геометрически, используя свойства треугольника. минимальная же определена как значение абсолютной погрешности (absolute tolerance) в активном проекте Rhino. при выходе за множество допустимых значений применяется среднее из допустимых.  

входы:
- **mesh**  —  тип данных Mesh.
- **x** — тип данных Float. управляет количественным значением отступа в мм.

выходы:
- **f** — геометрия обрамлений (Frames). представлена типом Mesh.
- **p** — геометрия панелей (Panels). представлена типом Mesh.
- **out** — используется для получения информации об успешности выполнения операции. примеры сообщений: 

`successful inset. allowed inset value bounds [0.001, 66.717435].`

`the offset value exceeds allowed bounds. bounds average is applied (33.358717).`

## match curves

компонент представляет собой кластер нативных компонентов Grasshopper, выполняющий функцию сортировки данных кривых на основе их геометрических свойств. 
способов достижения поставленной задачи было предложено несколько: 

- получение и сравнение, а затем сортировка исходной геометрии на основе значений *площади* каждого объекта.
- сортировка на основе значений периметров каждой кривой.
- сортировка на основе метрики Хаусдорффа. [{1}](https://en.wikipedia.org/wiki/Hausdorff_distance)
- комбинация вышеуказанных способов.
- сортировка на основе получения суммы расстояний от точки центроида до угловых точек для каждой кривой. вкупе данные расстояния с достаточной точностью определяют характерные особенности каждой кривой. каждая из них получает уникальный (в большинстве случаев) номер (полученная сумма), который может быть успешно использован для нахождения точной копии к каждой искомой кривой. 

для точного позиционирования кривых в пространстве был использован метод позиционирования по трём точкам (Orient 3pt). это позволило с допустимой погрешностью определить местоположение каждой кривой соответственное данной. 

входы:
- **init_crvs**  —  тип данных Curve. изначальные кривые.
- **names**  —  тип данных Str. список наименований кривых.
- **crvs_to_match**  —  тип данных Curve. кривые, необходимые к соответствованию.

выходы:
- **crvs_matched**  —  тип данных Curve. результирующие кривые.
- **anno**  —  тип данных Annotation Dot. используется для наглядного демонстрирования наименований кривых.


## panels by perimeter

данный скрипт представляет собой нативные компоненты Grasshopper, собранные в кластер. его функция состоит в построении панелей, базируясь на закрытой полилинии и данных полученных посредством ее анализа. результатом алгоритма является геометрия панелей типа mesh, а также отчёт о количестве панелей с установленным стандартом типоразмера и количество панелей, отличающихся от него. типоразмер определяется параметрами **panel height** и **panel width**. также имеется возможность настройки толщины панели и значения фаски граней в мм. в свою очередь выходные данные представляют собой четыре списка: 

- **u** — уникальные панели типа mesh полученные посредством алгоритма.
- **s** — панели типа mesh, соответствующие заданному типоразмеру.
- **e** — грани геометрии типа Line, используемые для более наглядного отображения геометрии в рабочем пространстве Rhino.
- **out** — отчёт о количестве полученных панелей. пример:

`panels amount with standard dimensions: 100`
`panels amount with non-type dimensions: 12`

## GCD with tolerance

компонент реализован на языке программирования Python. выполняет операцию по поиску наибольшего общего делителя длин заданного списка из двух кривых, учитывая фактор точности **f**, задаваемый пользователем.

входные данные представляют собой два потока:

- **сrvs** — данные типа Curve. ожидается список из двух кривых.
- **f** — данные типа Int. описывает точность, с которой числовые значения длин обрабатываются алгоритмом. параметр управляет разрядностью, после которой остаток от поступаемого значения принимается за 0. таким образом значение **32412.1234** при параметре **f** = 3 примет значение 32000. значение параметра в отрицательных степенях влияют на округление до f-го знака: **f = –2** ⇒ **32412.1234** ⇒ **32412.12**. однако в случае **f < 0** НОД математически неопределен и принимается в алгоритме за 0.  

выходы:

- **lengths** — исходные длины кривых.
- **lengths_rounded** — результирующее значение длин кривых.
- **gcd_out** — найденный НОД.
 
